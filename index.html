<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Convite Interativo - Ch√° de Fralda</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg, #f7f2ff, #ffffff);
  min-height: 100vh;
  overflow-x: hidden;
}

/* NUVENS */
.cloud {
  position: fixed;
  font-size: 90px;
  opacity: 0.12;
  top: 15%;
  left: -200px;
  animation: cloudMove 70s linear infinite;
  pointer-events: none;
}
.cloud.second {
  top: 45%;
  animation-delay: 35s;
}
@keyframes cloudMove {
  from { left: -200px; }
  to { left: 110%; }
}

/* CARD */
.card {
  background: #fff;
  width: 90%;
  max-width: 380px;
  margin: 60px auto;
  border-radius: 24px;
  padding: 28px;
  box-shadow: 0 20px 40px rgba(0,0,0,0.12);
  position: relative;
}

.heart {
  position: absolute;
  top: 14px;
  right: 18px;
  font-size: 22px;
}

h1 {
  text-align: center;
  color: #6b4eff;
}
.subtitle {
  text-align: center;
  color: #888;
  margin-bottom: 20px;
  font-size: 14px;
}

input {
  width: 100%;
  box-sizing: border-box;
  padding: 12px;
  border-radius: 12px;
  border: 1px solid #ccc;
  margin-bottom: 8px;
  font-size: 15px;
}

.btn {
  width: 100%;
  padding: 13px;
  border-radius: 14px;
  border: none;
  background: linear-gradient(135deg, #7aa2ff, #e6a6ff);
  color: #fff;
  font-size: 15px;
  cursor: pointer;
  margin-bottom: 10px;
}

/* MODAIS */
.modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.45);
  justify-content: center;
  align-items: center;
  z-index: 100;
}

.modal-content {
  background: #fff;
  width: 90%;
  max-width: 320px;
  max-height: 85vh;
  overflow-y: auto;
  border-radius: 18px;
  padding: 22px;
  text-align: center;
  position: relative;
}

.close {
  position: absolute;
  top: 10px;
  right: 10px;
  background: #eee;
  border-radius: 50%;
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-weight: bold;
}

.option {
  background: #f1f1f1;
  padding: 12px;
  border-radius: 10px;
  margin: 8px 0;
  cursor: pointer;
  transition: 0.2s;
}

.option.selected {
  background: #e8e2ff;
  border: 2px solid #6b4eff;
  box-shadow: 0 0 0 2px rgba(107,78,255,0.15);
}

.acomp-row {
  display: flex;
  gap: 6px;
}

.acomp-row input {
  flex: 1;
}

.summary {
  text-align: left;
  font-size: 14px;
}
</style>
</head>

<body>

<div class="cloud">‚òÅÔ∏è</div>
<div class="cloud second">‚òÅÔ∏è</div>

<div class="card">
  <div class="heart">üíú</div>
  <h1>Ch√° de Fralda</h1>
  <div class="subtitle">Com muito carinho para o nosso beb√™</div>

  <input id="nome" placeholder="Digite seu nome completo">

  <button class="btn" onclick="abrirLocal()">üìç Local do evento</button>
  <button class="btn" onclick="abrirAcompanhante()">üë• Voc√™ levar√° algu√©m?</button>
  <button class="btn" onclick="abrirFralda()">üéÅ O que voc√™ vai levar?</button>
  <button class="btn" onclick="confirmarPresenca()">‚≠ê Confirmar presen√ßa</button>
</div>

<!-- MODAIS -->
<div class="modal" id="modalLocal">
  <div class="modal-content">
    <div class="close" onclick="fechar('modalLocal')">‚úï</div>
    <p>üìç Local ser√° informado em breve üíï</p>
  </div>
</div>

<div class="modal" id="modalAcompanhante">
  <div class="modal-content">
    <div class="close" onclick="fechar('modalAcompanhante')">‚úï</div>
    <h3>Voc√™ levar√° algu√©m?</h3>

    <div class="option" onclick="selecionarQtd(1,this)">1 acompanhante</div>
    <div class="option" onclick="selecionarQtd(2,this)">2 acompanhantes</div>
    <div class="option" onclick="selecionarQtd(3,this)">3 acompanhantes ou mais</div>
    <div class="option" onclick="selecionarQtd(0,this)">N√£o levarei acompanhante</div>

    <div id="campos"></div>
  </div>
</div>

<div class="modal" id="modalFralda">
  <div class="modal-content">
    <div class="close" onclick="fechar('modalFralda')">‚úï</div>
    <h3>Qual fralda voc√™ vai levar?</h3>
    <div class="option" onclick="selecionarFralda('P',this)">Fralda P</div>
    <div class="option" onclick="selecionarFralda('M',this)">Fralda M</div>
    <div class="option" onclick="selecionarFralda('G',this)">Fralda G</div>

    <strong>+ mimo pra acompanhar!</strong>
    <p style="font-size:13px">Um carinho extra al√©m das fraldas üíï</p>
  </div>
</div>

<div class="modal" id="modalResumo">
  <div class="modal-content">
    <div class="close" onclick="fechar('modalResumo')">‚úï</div>
    <h3>Resumo da confirma√ß√£o</h3>
    <div class="summary" id="resumo"></div>
    <button class="btn" onclick="finalizar()">‚ú® Tudo certo</button>
  </div>
</div>

<script>
let fralda = '';
let acompanhantes = [];

/* üî¥ COLE A URL DO GOOGLE APPS SCRIPT AQUI */
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzbU2SvuNHtqVU3xSAQTTXLBHuQrBv3e7e-UwevhYOQVUUUwJB0iYlhHBvkbUdUJvUW2g/exec";

function abrirLocal(){ modalLocal.style.display='flex'; }
function abrirAcompanhante(){ modalAcompanhante.style.display='flex'; }
function abrirFralda(){ modalFralda.style.display='flex'; }
function fechar(id){ document.getElementById(id).style.display='none'; }

function limparSelecao(parent){
  parent.querySelectorAll('.option').forEach(o=>o.classList.remove('selected'));
}

function selecionarQtd(qtd,el){
  limparSelecao(modalAcompanhante);
  el.classList.add('selected');
  campos.innerHTML='';
  acompanhantes=[];

  for(let i=1;i<=qtd;i++){
    campos.innerHTML += `
      <div class="acomp-row">
        <input placeholder="Nome do acompanhante ${i}">
        <input type="number" placeholder="Idade">
      </div>
    `;
  }
}

function selecionarFralda(v,el){
  limparSelecao(modalFralda);
  el.classList.add('selected');
  fralda=v;
}

function confirmarPresenca(){
  const nome = document.getElementById('nome').value.trim();

  acompanhantes = [...document.querySelectorAll('.acomp-row')].map(r=>{
    const [n,i]=r.querySelectorAll('input');
    return n.value ? `${n.value} (${i.value || 'idade n√£o informada'})` : null;
  }).filter(Boolean);

  if(!nome || !fralda){
    alert("Preencha tudo üòä");
    return;
  }

  resumo.innerHTML = `
    <p><strong>Nome:</strong> ${nome}</p>
    <p><strong>Fralda:</strong> ${fralda}</p>
    <p><strong>Acompanhantes:</strong><br>${acompanhantes.join('<br>') || 'Nenhum'}</p>
    <p style="margin-top:10px;color:#6b4eff;">üíú Estamos ansiosos para sua presen√ßa!</p>
  `;

  modalResumo.style.display='flex';
}

function finalizar(){
  const dados = {
    nome: document.getElementById('nome').value,
    fralda: fralda,
    acompanhantes: acompanhantes.join(" | "),
    data: new Date().toLocaleString()
  };

  fetch(SCRIPT_URL, {
    method: "POST",
    body: JSON.stringify(dados)
  });

  if (navigator.vibrate) navigator.vibrate(120);

  alert("Presen√ßa confirmada üíú");
  fechar('modalResumo');
}
</script>

</body>
</html>